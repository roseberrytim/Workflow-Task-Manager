var outsidePromise = new Ext.Promise();

outsidePromise.then(function (name) {	
	console.log(name);
	console.log('Before Async Call');
	var insidePromise = new Ext.Promise();
	Sharepoint.data.WebServices.getGroupCollectionFromUser('LABNET1\\timothy.roseberry', this, function (options, success, response) {
		console.log('Inside Async Callback');
		insidePromise.fulfill(name, response.responseXML.getElementsByTagName('Group'));
	});
	console.log('After Async Call');
	return insidePromise;
}).then(function() {
	console.log(arguments);
	console.log('Then after initial then');
});	

